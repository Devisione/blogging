(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2205)}])},2205:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var a=n(5893),l=n(7294),r=n(6827);n(7377);var o=n(1367),i=n(1404),s=n(1904),d=n(6414),u=n(3249),m=n(8433),c=n(4951),p=n(381),g=n.n(p);function EventModal(e){let{modalOpen:t,setModalOpen:n,eventData:l,setEventData:r,saveEvent:o,deleteEvent:p}=e;return(0,a.jsxs)(s.u,{opened:t,onClose:()=>n(!1),title:"Редактировать событие",children:[(0,a.jsx)(d.o,{label:"Название события",value:l.title,onChange:e=>r({...l,title:e.target.value})}),(0,a.jsx)(m.a,{label:"Дата события",value:l.start,onChange:e=>r({...l,start:e,end:e})}),(0,a.jsx)(c.M,{label:"Время события",value:g()(l.start).format("HH:mm"),onChange:e=>{let t=e.target.value,n=g()(l.start).set({hour:Number(t.split(":")[0]),minute:Number(t.split(":")[1])}).toDate(),a=g()(n).add(l.duration,"minutes").toDate();r({...l,start:n,end:a})}}),(0,a.jsx)(u.Y,{label:"Длительность",value:l.duration,onChange:e=>{if(null!==e){let t=g()(l.start).add(e,"minutes").toDate();r({...l,duration:e,end:t})}},min:1}),(0,a.jsx)(i.z,{fullWidth:!0,onClick:o,style:{marginTop:"20px"},children:"Сохранить"}),(0,a.jsx)(i.z,{fullWidth:!0,onClick:p,style:{marginTop:"20px",backgroundColor:"red",color:"white"},children:"Удалить"})]})}var v=n(4065),f=n(2974),h=n(3170),y=n(1429);let x={ru:o.Z},w=(0,r.lD)({format:v.ZP,parse:f.ZP,startOfWeek:h.Z,getDay:y.Z,locales:x}),D={timeGutterFormat:"HH:mm",eventTimeRangeFormat:e=>{let{start:t,end:n}=e;return"".concat((0,v.ZP)(t,"HH:mm")," - ").concat((0,v.ZP)(n,"HH:mm"))},dayFormat:"d MMMM yyyy",agendaDateFormat:"d MMMM yyyy",agendaTimeFormat:"HH:mm",weekdayFormat:"iiii"},M={allDay:"Все дни",previous:"Предыдущий",next:"Следующий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",agenda:"Агенда",date:"Дата",time:"Время",event:"Событие"};function Home(){let[e,t]=(0,l.useState)(()=>JSON.parse(localStorage.getItem("events")||"[]").map(e=>({...e,start:new Date(e.start),end:new Date(e.end)}))),[n,o]=(0,l.useState)(!1),[s,d]=(0,l.useState)({title:"",start:new Date,end:new Date,repeat:"none",repeatInterval:1,repeatUntil:null,duration:30,id:null});(0,l.useEffect)(()=>{localStorage.setItem("events",JSON.stringify(e.map(e=>({...e,start:e.start.toISOString(),end:e.end.toISOString()}))))},[e]);let openModal=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?d(t):d({title:"",start:e,end:e,repeat:"none",repeatInterval:1,repeatUntil:null,duration:30,id:null}),o(!0)},deleteEvent=n=>{t(e.filter(e=>e.id!==n.id))};return(0,a.jsxs)("div",{style:{padding:"20px"},children:[(0,a.jsx)("h1",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},children:"Календарь событий"}),(0,a.jsx)(i.z,{onClick:()=>openModal(new Date),style:{marginBottom:"20px"},children:"Добавить событие"}),(0,a.jsx)(r.f,{localizer:w,events:e,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectSlot:e=>{let t=new Date(e.start),n=new Date(e.end),a=Math.floor((n.getTime()-t.getTime())/6e4);d({...s,start:t,end:n,duration:a}),o(!0)},onSelectEvent:e=>{openModal(e.start,e)},messages:M,selectable:!0,formats:D,culture:"ru"}),(0,a.jsx)(EventModal,{modalOpen:n,setModalOpen:o,eventData:s,setEventData:d,saveEvent:()=>{s.id?t(e.map(e=>e.id===s.id?s:e)):t([...e,{...s,id:Date.now()}]),o(!1)},deleteEvent:()=>deleteEvent(s)})]})}}},function(e){e.O(0,[342,770,885,19,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);